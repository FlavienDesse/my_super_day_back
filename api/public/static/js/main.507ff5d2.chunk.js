(this.webpackJsonpmy_super_day=this.webpackJsonpmy_super_day||[]).push([[6],{23:function(e,t,r){e.exports=r(33)},33:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(14),u=r.n(c),s=r(15),i=r(2),o=r.n(i),l=r(7);function p(){var e=JSON.parse(window.localStorage.getItem("users"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var f={login:function(e){var t=this;return Object(l.a)(o.a.mark((function r(){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:window.localStorage.setItem("users",JSON.stringify(e)),t.currentUser=e,t.callback&&t.callback(e);case 3:case"end":return r.stop()}}),r)})))()},getCurrentUser:function(){return this.currentUser},isConnected:function(){return function(){var e={method:"GET",headers:p()};return fetch("".concat(window.url,"/mysuperday/api/users/verifyToken"),e).then((function(e){return e.json().then((function(t){return console.log(t),403!=e.status&&401!=e.status&&500!=e.status}))}))}().then((function(e){return e}))},deconnected:function(){console.log(window.localStorage),delete this.currentUser,window.localStorage.clear(),this.callback&&this.callback(void 0),console.log(window.localStorage)},subscribe:function(e){var t=this;return this.callback=e,function(){t.callback=void 0}}};try{f.currentUser=JSON.parse(window.localStorage.getItem("users"))}catch(O){}var b=r(1),d=Object(b.b)(Object(b.h)({"/mysuperday/dashboard/biorythme":Object(b.f)(function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.authService.isConnected();case 2:if(!e.sent){e.next=6;break}e.t0=Object(b.j)({getView:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c,u,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(0),r.e(1),r.e(2),r.e(5)]).then(r.bind(null,377));case 2:return c=e.sent,u=c.Dashboard,e.next=6,Promise.all([r.e(0),r.e(4),r.e(9),r.e(13)]).then(r.bind(null,379));case 6:return s=e.sent,i=s.Biorythm,e.abrupt("return",a.a.createElement(u,{authService:n.authService},a.a.createElement(i,null)));case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}),e.next=7;break;case 6:e.t0=Object(b.i)("/mysuperday/users/signin");case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),"/mysuperday/dashboard/calculatrice":Object(b.f)(function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.authService.isConnected();case 2:if(!e.sent){e.next=6;break}e.t0=Object(b.j)({getView:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c,u,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(0),r.e(1),r.e(2),r.e(5)]).then(r.bind(null,377));case 2:return c=e.sent,u=c.Dashboard,e.next=6,Promise.all([r.e(0),r.e(1),r.e(3),r.e(4),r.e(8)]).then(r.bind(null,370));case 6:return s=e.sent,i=s.Calculator,e.abrupt("return",a.a.createElement(u,{authService:n.authService},a.a.createElement(i,null)));case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}),e.next=7;break;case 6:e.t0=Object(b.i)("/mysuperday/users/signin");case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),"/mysuperday/dashboard":Object(b.f)(function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.authService.isConnected();case 2:if(!e.sent){e.next=6;break}e.t0=Object(b.j)({getView:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(0),r.e(1),r.e(2),r.e(5)]).then(r.bind(null,377));case 2:return c=e.sent,u=c.Dashboard,e.abrupt("return",a.a.createElement(u,{authService:n.authService}));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}),e.next=7;break;case 6:e.t0=Object(b.i)("/mysuperday/users/signin");case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),"/mysuperday/users/signup":Object(b.j)({getView:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(0),r.e(1),r.e(3),r.e(4),r.e(11)]).then(r.bind(null,371));case 2:return c=e.sent,u=c.SignUp,e.abrupt("return",a.a.createElement(u,{authService:n.authService}));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}),"/mysuperday/users/signin":Object(b.f)(function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.authService.isConnected();case 2:if(!e.sent){e.next=6;break}e.t0=Object(b.i)("/mysuperday/dashboard"),e.next=7;break;case 6:e.t0=Object(b.j)({getView:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(0),r.e(1),r.e(3),r.e(12)]).then(r.bind(null,380));case 2:return c=e.sent,u=c.SignIn,e.abrupt("return",a.a.createElement(u,{authService:n.authService}));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()});case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),"/":Object(b.i)("/mysuperday/users/signin"),"/mysuperday":Object(b.i)("/mysuperday/users/signin")})),h=r(9),m=r(20);function v(){return a.a.createElement("div",null,"Erreur 404")}function y(e){var t=e.children,r=Object(h.f)();return a.a.createElement("div",{className:"Layout"},a.a.createElement(m.a,{isBusy:!!r,delayMs:200}),a.a.createElement("main",null,a.a.createElement(h.b,{render:v},t)))}function w(){var e=Object(n.useState)((function(){return f.getCurrentUser()})),t=Object(s.a)(e,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){return f.subscribe(c)}),[]),a.a.createElement(h.c,{routes:d,context:{authService:f,currentUser:r}},a.a.createElement(y,null,a.a.createElement(n.Suspense,{fallback:null},a.a.createElement(h.d,null))))}window.url="http://localhost:9000";var j=r(21);u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(j.a,null,a.a.createElement(w,null))),document.getElementById("root"))}},[[23,7,10]]]);
//# sourceMappingURL=main.507ff5d2.chunk.js.map